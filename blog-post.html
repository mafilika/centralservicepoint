<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title id="meta-title">Blog Post | Central Service Point</title>
<meta id="meta-description" name="description" content="">

<link rel="stylesheet" href="style.css">

<!-- Contentful -->
<script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
<script src="https://unpkg.com/@contentful/rich-text-html-renderer/dist/rich-text-html-renderer.js"></script>
</head>

<body>

<!-- ================= HEADER (unchanged) ================= -->
<header>
<div class="logo">Central Service Point</div>
<nav>
<a href="index.html">Home</a>
<a href="services.html">Services</a>
<a href="provinces.html">Provinces</a>
<a href="case-studies.html">Case Studies</a>
<a href="blog.html">Blog</a>
<a href="request-quote.html" class="cta">Request Quote</a>
</nav>
</header>


<!-- ================= HERO ================= -->
<section class="hero">
<h1 id="title">Loading...</h1>
<p id="date"></p>
</section>


<!-- ================= BLOG CONTENT ================= -->
<section>
<article style="max-width:800px; margin:auto; background:#fff; padding:40px; border-radius:12px;">

<img id="image" style="width:100%; border-radius:10px; margin-bottom:20px; display:none;" />

<div id="content"></div>

</article>
</section>


<!-- ================= FOOTER (unchanged) ================= -->
<footer>
<div class="footer-col">
<h4>Central Service Point</h4>
<p>Connecting homeowners with trusted contractors across South Africa.</p>
</div>
<div class="footer-col">
<h4>Quick Links</h4>
<a href="index.html">Home</a>
<a href="services.html">Services</a>
<a href="provinces.html">Provinces</a>
<a href="case-studies.html">Case Studies</a>
<a href="blog.html">Blog</a>
<a href="request-quote.html">Request Quote</a>
</div>
<div class="footer-col">
<h4>Contact</h4>
<p>info@centralservicepoint.store</p>
<p>+27 71 785 3990</p>
</div>
</footer>



<!-- ================= CONTENTFUL SCRIPT ================= -->
<script>
const client = contentful.createClient({
  space: "81oc7riu4paq",
  accessToken: "4NyIoWur4cubCieOMOi2CslUkuGaenkpTXTn38-Uo-o"
});

const params = new URLSearchParams(window.location.search);
const id = params.get("id");

client.getEntry(id).then(post => {

  const title = post.fields.title;
  const date = post.fields.date;
  const excerpt = post.fields.excerpt;
  const image = post.fields.featuredImage?.fields.file.url;

  document.getElementById("title").innerText = title;
  document.getElementById("date").innerText =
    "Published: " + new Date(date).toDateString();

  document.getElementById("meta-title").innerText = title + " | Central Service Point";
  document.getElementById("meta-description").content = excerpt;

  if(image){
    const imgEl = document.getElementById("image");
    imgEl.src = "https:" + image;
    imgEl.style.display = "block";
  }

  document.getElementById("content").innerHTML =
    documentToHtmlString(post.fields.content);


  /* ================= ARTICLE RICH RESULTS ================= */

  const schema = {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": title,
    "image": ["https:" + image],
    "datePublished": date,
    "dateModified": date,
    "author": {
      "@type": "Organization",
      "name": "Central Service Point"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Central Service Point"
    },
    "description": excerpt,
    "mainEntityOfPage": window.location.href
  };

  const script = document.createElement("script");
  script.type = "application/ld+json";
  script.text = JSON.stringify(schema);
  document.body.appendChild(script);

});
</script>

</body>
  </html>
