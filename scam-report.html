<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Report a Scam | Central Service Point</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f7f6;
    margin: 0;
    padding: 0;
  }
  header {
    background: #0aa06e;
    color: #fff;
    padding: 20px;
    text-align: center;
    font-size: 1.5em;
    font-weight: bold;
  }
  .container {
    max-width: 600px;
    margin: 40px auto;
    background: #fff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  }
  h2 {
    color: #0aa06e;
    text-align: center;
  }
  input, textarea, select {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 14px;
  }
  textarea { min-height: 120px; }
  button {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 8px;
    background: #0aa06e;
    color: #fff;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
  }
  button:hover { opacity: 0.9; }
  .success { color: green; display: none; margin-top: 15px; text-align: center; font-weight: bold; }
</style>
</head>

<body>

<header>Central Service Point</header>

<div class="container">
  <h2>Report a Scam Contractor</h2>
  <p style="text-align:center;">Help protect others by reporting fraudulent or suspicious contractors.</p>

  <form id="scamForm">
    <input id="name" placeholder="Your Name" required>
    <input id="email" placeholder="Email" type="email" required>
    <input id="contractor" placeholder="Contractor / Business Name" required>
    <input id="phone" placeholder="Phone Used">
    <select id="service">
      <option value="">Select Service</option>
      <option>Plumbing</option>
      <option>Electrical</option>
      <option>Construction</option>
      <option>Painting</option>
      <option>Other</option>
    </select>
    <textarea id="description" placeholder="Describe what happened" required></textarea>

    <button type="submit">Submit Report</button>
    <p class="success" id="successMsg">‚úÖ Report submitted successfully!</p>
  </form>
</div>

<script type="module">
// Import Firebase modules
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

// üî• Your Firebase Config (replace with YOUR keys)
const firebaseConfig = {
  apiKey: "AIzaSyAFojWvBMBcNjatWt7dkuScaKdQ8j8dTlk",
  authDomain: "central-service-point.firebaseapp.com",
  projectId: "central-service-point",
  storageBucket: "central-service-point.firebasestorage.app",
  messagingSenderId: "507779147190",
  appId: "1:507779147190:web:8751a9a70092cfcf474d17"
};

  const messageEl = document.createElement("p");
document.body.appendChild(messageEl);

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  messageEl.style.color = "black";
  messageEl.textContent = "Submitting...";

  try {
    await addDoc(collection(db, "scamReports"), {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      contractor: document.getElementById("contractor").value,
      phone: document.getElementById("phone").value,
      description: document.getElementById("description").value,
      createdAt: serverTimestamp()
    });
    messageEl.style.color = "green";
    messageEl.textContent = "‚úÖ Report submitted!";
    form.reset();
  } catch (err) {
    messageEl.style.color = "red";
    messageEl.textContent = "‚ùå Firebase Error: " + err.message;
  }
});

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Form submit handler
const form = document.getElementById("scamForm");
const successMsg = document.getElementById("successMsg");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  try {
    await addDoc(collection(db, "scamReports"), {
      name: name.value,
      email: email.value,
      contractor: contractor.value,
      phone: phone.value,
      service: service.value,
      description: description.value,
      createdAt: serverTimestamp()
    });

    // Show success
    successMsg.style.display = "block";
    form.reset();

  } catch (err) {
    console.error("Error submitting report:", err);
    alert("‚ùå Error submitting the report. Check console for details.");
  }
});
</script>

</body>
</html>
