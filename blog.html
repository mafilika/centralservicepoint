<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blog | Central Service Point</title>
<link rel="stylesheet" href="style.css">
  <!-- Contentful SDK -->
  <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
</head>
<body>

<header>
<div class="logo">Central Service Point</div>
<nav>
<a href="index.html">Home</a>
<a href="services.html">Services</a>
<a href="provinces.html">Provinces</a>
<a href="case-studies.html">Case Studies</a>
<a href="blog.html" class="cta">Blog</a>
<a href="request-quote.html" class="cta">Request Quote</a>
</nav>
</header>

<section class="hero">
<h1>Central Service Point Blog</h1>
<p>Helpful guides, tips, and industry insights for homeowners and property owners.</p>
</section>


  <div class="container">

    <h1>Safety & Scam Prevention Blog</h1>
    <p class="subtitle">
      Tips, guides and trusted advice to help you hire safely and avoid scams.
    </p>

    <div id="posts" class="grid"></div>
    <p id="loading" class="loading">Loading posts...</p>

  </div>


  <!-- ================= CONTENTFUL LOGIC ================= -->
  <script>
    const client = contentful.createClient({
      space: "81oc7riu4paq",
      accessToken: "4NyIoWur4cubCieOMOi2CslUkuGaenkpTXTn38-Uo-o"
    });

    const container = document.getElementById("posts");
    const loading = document.getElementById("loading");

    client.getEntries({
      content_type: "blogPost",
      order: "-fields.date"
    })
    .then(res => {

      loading.style.display = "none";

      let schemaItems = [];

      res.items.forEach((post, index) => {

        const title = post.fields.title;
        const excerpt = post.fields.excerpt;
        const image = post.fields.featuredImage?.fields.file.url;
        const id = post.sys.id;

        container.innerHTML += `
          <div class="card">
            <img src="https:${image}" alt="${title}">
            <div class="card-content">
              <h2>${title}</h2>
              <p>${excerpt}</p>
              <a href="post.html?id=${id}" class="btn">Read More â†’</a>
            </div>
          </div>
        `;

        /* Build schema list */
        schemaItems.push({
          "@type": "ListItem",
          "position": index + 1,
          "url": "https://centralservicepoint.com/post.html?id=" + id
        });

      });

      /* ================= BLOG SCHEMA ================= */
      const schema = {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "Central Service Point Blog",
        "description": "Safety tips, scam prevention and trusted contractor advice.",
        "blogPost": schemaItems
      };

      const script = document.createElement("script");
      script.type = "application/ld+json";
      script.text = JSON.stringify(schema);
      document.body.appendChild(script);

    })
    .catch(err => {
      loading.innerText = "Failed to load posts.";
      console.error(err);
    });
  </script>

<footer>
<div class="footer-col">
<h4>Central Service Point</h4>
<p>Connecting homeowners with trusted contractors across South Africa.</p>
</div>
<div class="footer-col">
<h4>Quick Links</h4>
<a href="index.html">Home</a>
<a href="services.html">Services</a>
<a href="provinces.html">Provinces</a>
<a href="case-studies.html">Case Studies</a>
<a href="blog.html">Blog</a>
<a href="request-quote.html">Request Quote</a>
</div>
<div class="footer-col">
<h4>Contact</h4>
<p>info@centralservicepoint.co.za</p>
<p>+27 71 785 3990</p>
</div>
</footer>

<script src="main.js"></script>
</body>
</html>
